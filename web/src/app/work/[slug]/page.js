import { getWorkBySlug } from "../../../queries/getWorkBySlug";
import ClientMuxPlayer from "../../../components/ClientMuxPlayer";
import { PortableText } from "next-sanity";
import Link from "next/link";
import DraggableStackWrapper from "../../../components/DraggableStackWrapper";
import WorkPasswordWrapper from "../../../components/WorkPasswordWrapper";
import { notFound } from "next/navigation";

// Revalidate this page every 60 seconds
export const revalidate = 60;

export async function generateMetadata({ params }) {
  const { slug } = await params;
  const work = await getWorkBySlug(slug);

  if (!work) {
    return {
      title: "Work Not Found",
    };
  }

  const title = `${work.title} â€“ Niels Windfeldt`;
  const description = work.type;

  const metadata = {
    title,
    description,
  };

  // Add Open Graph image if video thumbnail is available
  if (work.video?.asset?.playbackId) {
    const thumbnailUrl = `https://image.mux.com/${work.video.asset.playbackId}/thumbnail.jpg?width=1200&height=630&fit_mode=smartcrop`;

    metadata.openGraph = {
      title,
      description,
      images: [
        {
          url: thumbnailUrl,
          width: 1200,
          height: 630,
          alt: title,
        },
      ],
    };

    metadata.twitter = {
      card: "summary_large_image",
      title,
      description,
      images: [thumbnailUrl],
    };
  }

  return metadata;
}

export default async function WorkDetail({ params, searchParams }) {
  const { slug } = await params;
  const work = await getWorkBySlug(slug);

  if (!work) {
    notFound();
  }

  console.log("work", work);
  return (
    <WorkPasswordWrapper
      work={work}
      params={params}
      searchParams={searchParams}
    >
      <main className="">
        <div className="pt-4">
          <div
            className="mb-2 px-4 max-h-[90svh]"
            style={{
              aspectRatio: work.video.asset.data?.aspect_ratio?.replace(
                ":",
                "/"
              ),
            }}
          >
            {/* Video */}
            {work.video?.asset?.playbackId && (
              <ClientMuxPlayer
                playbackId={work.video.asset.playbackId}
                controls
                className="w-full"
                aspectRatio={work.video.asset.data?.aspect_ratio}
              />
            )}
          </div>
          {/* Work Details */}
          <div className="w-full grid grid-cols-1 md:grid-cols-2 px-4 gap-12 md:gap-0 mb-12">
            <div>
              <h1 className="">{work.name}</h1>
              <h2 className="font-normal">{work.title}</h2>
              <p className="font-normal">{work.type}</p>
              <p className="font-normal">{work.year}</p>
            </div>
            {work.badge && work.badge.length > 0 && (
              <div className="h-12 flex items-start gap-4">
                {work.badge.includes("directors-library") && (
                  <div className="aspect-square h-full">
                    <svg
                      width="818"
                      height="483"
                      viewBox="0 0 818 483"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-full h-full"
                    >
                      <path
                        d="M817 0L658.33 242.5L818 482H500V444H741L605.16 243.32L741 40H40V164H0V0H817Z"
                        fill="white"
                      />
                      <path
                        d="M0 228C57.02 230.69 122.48 216.49 170.47 255.03C209.94 286.73 218.37 346.79 207.32 393.83C193.82 451.32 147.29 478.96 90.54 482.05L0 482.01V228ZM40 444H94.5C109.74 444 134.94 432.01 145.52 421.02C171.5 394.06 172.68 334.69 155.52 302.97C132.47 260.38 81.74 264.65 40 264.99V444Z"
                        fill="white"
                      />
                      <path
                        d="M309 228V444H436V482H270V228H309Z"
                        fill="white"
                      />
                    </svg>
                  </div>
                )}
                {work.badge.includes("vimeo-staff-picks") && (
                  <div className="aspect-square h-full">
                    <svg
                      width="834"
                      height="816"
                      viewBox="0 0 834 816"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-full h-full"
                    >
                      <path
                        d="M608.352 45.0667C812.052 147.617 895.692 398.327 784.112 601.537C682.202 787.157 450.792 865.137 254.212 783.677C-0.588425 678.077 -84.3484 358.017 97.7616 145.177C222.622 -0.753326 436.362 -41.5233 608.352 45.0667ZM454.122 54.7867C454.122 35.1367 438.192 19.2167 418.552 19.2167C398.912 19.2167 382.982 35.1467 382.982 54.7867C382.982 74.4267 398.912 90.3567 418.552 90.3567C438.192 90.3567 454.122 74.4267 454.122 54.7867ZM626.672 78.7467C593.102 59.2667 557.362 44.4667 519.972 33.9267L486.752 26.6567V33.6467C523.942 39.7367 561.742 51.5867 595.402 68.4967C602.432 72.0267 617.512 82.7167 623.442 84.4667C624.222 84.6967 624.942 84.7367 625.732 84.6567L626.682 78.7467H626.672ZM210.802 78.7367C210.342 80.5267 211.922 84.8967 214.072 84.5567C248.982 63.0067 287.562 47.5067 327.532 37.9567C330.932 37.1467 350.372 34.0167 351.312 32.7367C352.352 30.4767 352.032 27.9467 349.252 27.6367C347.302 27.4167 333.672 30.2967 330.532 30.9567C288.122 39.7967 248.192 57.3767 210.812 78.7467L210.802 78.7367ZM349.462 50.8267C339.342 53.8767 328.692 55.1767 318.502 57.9267C304.082 61.8167 280.382 69.0767 267.472 75.8867C266.442 76.4267 265.422 76.9967 264.942 78.1367C264.252 86.4667 281.172 76.7367 284.202 75.6267C294.292 71.9267 304.662 68.9167 314.732 65.1567L351.302 56.7367C352.152 55.0567 352.392 50.6967 349.452 50.8267H349.462ZM570.532 81.4367L572.562 78.1367C572.162 77.2867 571.442 76.6967 570.662 76.2167C565.602 73.0767 549.122 67.3567 542.712 65.1667C524.462 58.9267 505.522 54.9067 486.742 50.6467V57.6467C509.232 60.8967 531.792 67.9767 553.252 75.6267C556.702 76.8567 568.172 82.8567 570.522 81.4267L570.532 81.4367ZM351.732 77.6567C329.892 81.6167 307.432 87.9367 286.762 96.1767C271.672 102.197 253.062 111.117 239.492 119.907C236.012 122.167 239.172 124.277 242.052 125.527C275.172 105.707 311.602 91.1267 349.712 84.1367C352.132 82.8667 351.852 80.0567 351.732 77.6667V77.6567ZM598.642 119.747C597.732 119.567 596.702 119.547 595.892 119.057C562.432 98.8067 525.202 85.0167 486.742 77.6567L487.692 84.1967C517.462 90.0567 546.432 99.9667 573.612 113.277C577.022 114.947 596.352 126.577 597.722 125.657L598.632 119.757L598.642 119.747ZM616.112 95.2867C612.132 91.4967 612.842 91.6367 606.942 89.9467C598.342 87.4867 588.162 85.3367 579.352 83.5167C578.282 83.2967 578.322 81.9167 576.752 84.1567L602.492 112.397L636.722 120.657C636.932 119.387 636.432 118.407 635.732 117.417C631.972 112.087 620.972 99.9167 616.112 95.2867ZM259.732 83.6667C250.342 86.3467 231.602 87.4167 223.822 92.2467C219.982 94.6267 205.792 112.027 202.222 116.647C201.442 117.647 200.292 117.927 200.732 119.647L235.702 112.127L259.732 83.6667ZM168.742 138.647C169.162 139.097 178.032 133.397 179.212 132.627C184.792 128.967 190.072 124.747 195.642 121.057L206.732 86.6567L179.022 104.927L168.752 138.647H168.742ZM636.322 90.0867C634.632 89.1067 631.712 86.7567 629.732 88.1567L641.262 120.627L668.732 138.647L657.192 104.697C650.472 100.187 643.202 94.0567 636.322 90.0867ZM160.362 151.297L165.722 115.657L142.082 136.987C140.722 148.827 136.302 160.797 137.232 172.647L160.362 151.287V151.297ZM673.372 117.037C672.932 116.687 670.892 115.457 670.742 115.657C670.732 117.137 670.622 118.647 670.742 120.137C671.142 124.617 675.052 147.377 676.512 150.367C677.712 152.837 690.722 164.637 693.712 167.167C694.632 167.947 700.032 172.407 700.722 171.647L694.972 137.907C694.352 136.407 675.932 119.087 673.362 117.037H673.372ZM665.732 143.647C657.952 135.797 647.282 130.207 638.092 123.937L603.732 126.667C603.552 126.797 604.792 129.167 605.452 129.697C607.752 131.547 628.962 145.167 630.482 145.447L665.732 143.637V143.647ZM233.732 126.667L197.502 124.927C195.752 125.327 175.412 138.997 173.422 140.837C172.452 141.727 171.272 141.727 171.742 143.647L207.022 145.447C215.822 139.387 226.362 134.337 233.742 126.657L233.732 126.667ZM369.502 137.887C365.022 133.397 353.692 139.017 352.132 144.627C349.192 155.207 368.572 154.107 370.542 144.927C370.952 143.027 370.862 139.267 369.492 137.887H369.502ZM108.732 175.157V209.657L129.522 184.947C129.472 173.107 130.252 161.417 130.722 149.657L127.832 151.257L108.732 175.157ZM706.732 150.657V177.157C706.732 190.157 720.382 197.847 726.442 208.387L728.732 209.657V178.157C728.732 174.057 714.862 157.547 711.242 153.647C710.042 152.347 708.742 150.417 706.732 150.657ZM198.732 151.657L163.682 154.097L139.732 175.637L174.012 174.427L190.742 160.157L198.722 151.647L198.732 151.657ZM687.362 166.037L673.022 153.867L638.742 151.657C637.672 152.557 642.732 156.857 643.532 157.587C646.572 160.377 661.212 173.937 663.442 174.437L697.722 175.637L687.352 166.037H687.362ZM345.742 168.647C344.912 152.697 322.582 160.167 321.742 172.647L328.302 173.587C331.512 177.457 323.312 191.907 320.172 192.607C315.612 193.627 313.812 173.887 313.092 170.807C308.442 150.957 296.452 164.557 287.752 173.167L289.382 175.577L296.632 174.767C302.312 182.127 302.542 209.537 313.342 210.647C321.502 211.477 333.912 195.957 338.192 189.587C341.952 184.007 344.162 173.237 351.752 174.647C352.662 183.947 341.142 201.237 349.302 208.597C355.132 213.857 368.892 207.017 373.252 201.667C377.762 208.317 381.242 210.897 389.752 209.637C385.622 203.177 391.882 176.087 400.242 175.997C407.752 175.917 401.292 190.417 400.862 194.247C399.572 205.807 405.282 210.967 416.742 209.637C414.612 203.227 416.022 196.787 418.262 190.667C419.582 187.087 426.692 173.367 431.642 176.737C435.562 183.507 425.382 204.767 431.982 209.407C437.522 213.307 451.582 207.027 456.252 202.657C466.982 218.717 490.242 207.537 504.102 201.567C512.932 216.227 535.202 212.307 544.742 200.147C553.702 188.737 556.452 163.257 538.152 160.737C517.852 157.937 500.442 172.957 501.572 193.487C493.572 196.267 485.182 200.057 476.502 198.387C476.292 198.347 471.982 196.667 473.222 195.647C482.532 192.387 490.302 190.187 496.702 182.127C505.522 171.007 500.812 160.277 486.292 160.627C469.382 161.037 451.742 178.227 453.302 195.717C441.062 200.497 449.062 183.007 449.612 177.037C451.842 153.057 431.112 160.587 420.752 172.657C418.132 153.637 399.432 162.487 390.752 171.657C389.602 150.797 375.172 164.707 367.752 173.177L369.372 175.597L375.742 174.667C376.142 182.637 375.572 200.877 363.662 195.257C359.212 189.507 376.042 156.697 357.472 160.857C354.992 161.417 346.642 169.647 345.752 168.657L345.742 168.647ZM167.732 180.667L132.522 187.957C127.622 193.647 122.442 199.307 117.752 205.187C116.982 206.147 111.982 212.007 112.732 212.657L147.022 205.707L167.732 180.677V180.667ZM715.352 200.037C713.202 197.417 705.822 188.597 703.452 187.447L669.742 180.667L689.512 205.637L724.732 213.657C725.592 212.797 716.512 201.437 715.352 200.037ZM98.7216 187.657C97.6716 187.797 96.9116 188.927 96.3016 189.727C94.6216 191.907 82.0416 212.807 81.7816 214.207C80.3816 221.747 83.6916 237.717 84.7016 246.197C84.8816 247.707 84.7416 248.677 86.2416 249.637L102.722 223.137L98.7316 187.657H98.7216ZM751.722 250.647L755.722 215.247L739.232 187.677C736.772 187.567 736.942 202.417 736.722 204.147C735.972 210.167 734.972 216.187 733.752 222.127L751.722 250.657V250.647ZM140.732 212.667L105.972 224.907L89.7316 252.647C91.1016 253.727 118.432 242.007 122.662 241.087L140.732 212.667ZM747.732 252.647L730.272 224.617L697.742 212.657C697.542 214.027 697.932 215.167 698.502 216.387C702.042 223.917 710.042 232.627 713.392 240.737L747.732 252.647ZM66.7416 292.657L81.7316 264.087L74.7216 228.657C67.8716 236.897 64.0416 248.407 59.1316 258.147L66.7416 292.657ZM764.722 229.657L761.962 231.387C761.742 241.037 755.392 253.907 755.802 263.087C755.942 266.117 766.292 287.317 768.492 291.377C769.132 292.557 768.462 293.057 770.722 292.657L777.812 258.147L764.712 229.657H764.722ZM267.732 266.657V299.157L269.232 300.657H293.232L294.732 299.157V255.157C294.732 248.837 284.052 242.337 278.262 241.627C270.012 240.617 242.322 240.527 234.302 241.717C227.202 242.777 221.372 248.957 220.692 256.107C218.202 281.997 222.672 311.857 220.722 338.177C220.102 342.007 228.412 351.657 231.242 351.657H267.742V417.657H244.742V383.657H220.742V432.157C220.742 432.537 224.082 438.257 224.472 438.697C226.212 440.647 232.532 444.367 235.212 444.687C243.532 445.687 271.122 445.807 279.172 444.597C288.262 443.227 294.012 436.077 294.772 427.197C297.052 400.357 292.992 370.347 294.742 343.157C294.432 339.677 291.982 334.237 289.432 331.977C288.972 331.567 282.662 327.657 282.242 327.657H246.242L244.742 326.157V268.157L246.242 266.657H267.742H267.732ZM357.732 444.657V268.157L359.232 266.657H379.232L380.732 265.157V243.157L379.232 241.657H308.732V265.157L310.232 266.657H330.732V443.157L332.232 444.657H357.732ZM410.732 444.657L414.722 403.647L443.792 404.087L447.912 442.967L449.222 444.657H473.722L452.722 241.657L406.822 241.767C404.222 250.987 404.762 260.747 403.712 270.147C397.712 323.827 391.272 377.387 386.712 431.147C386.492 433.767 383.712 443.957 386.222 444.657H410.732ZM553.732 241.657H490.232L488.732 243.157V443.157L490.232 444.657H515.732V351.157L517.232 349.657H542.732V323.657H517.232L515.732 322.157V266.657H553.732V241.657ZM636.732 241.657H572.732V444.657H598.732V351.157L600.232 349.657H625.732V323.657H600.232L598.732 322.157V268.157L600.232 266.657H636.732V241.657ZM116.732 250.657C116.222 250.137 105.012 255.017 103.522 255.737C102.802 256.087 102.692 257.187 101.932 257.557C86.8416 264.867 87.1116 261.507 79.0016 277.417C77.8916 279.587 71.1716 293.907 71.7516 294.657L104.192 278.607L116.742 250.667L116.732 250.657ZM764.732 293.647L752.302 266.587C749.072 263.707 721.112 249.367 719.742 250.657C723.542 258.257 726.262 267.017 730.562 274.327C734.642 281.257 751.592 289.177 759.502 292.377C761.192 293.067 762.822 293.857 764.732 293.647ZM56.7216 337.657L65.2316 307.157L53.2416 273.667C52.3216 274.487 51.4416 275.197 50.9916 276.417C49.5316 280.377 42.9216 301.347 42.9216 304.157C42.9216 307.887 52.4316 331.417 54.6416 336.257C55.1716 337.427 54.1616 338.067 56.7316 337.667L56.7216 337.657ZM785.732 274.657C783.892 274.297 783.232 275.527 782.522 276.937C778.262 285.367 775.992 297.367 771.672 306.167L780.742 337.657C782.192 337.557 782.272 336.117 782.752 335.187C787.432 326.077 789.802 314.247 794.492 304.957L785.722 274.667L785.732 274.657ZM99.7316 288.667C97.7816 287.157 89.5916 294.547 87.9816 295.627C84.1916 298.157 71.9216 305.227 69.7016 308.127C68.2916 309.977 61.9416 330.177 61.1816 333.607C60.8116 335.297 60.5416 336.927 60.7416 338.657C65.1516 336.057 69.7416 333.477 73.9816 330.627C78.8416 327.367 89.1816 320.757 91.2016 315.627C94.5516 307.147 95.5316 296.937 99.7316 288.667ZM743.332 291.077C742.512 290.587 736.682 286.637 737.752 290.137L747.662 319.997C756.432 323.967 765.242 333.237 773.392 337.507C774.812 338.247 776.062 338.927 777.742 338.647C772.682 331.377 771.882 314.277 767.182 307.727C766.172 306.327 746.332 292.877 743.342 291.087L743.332 291.077ZM47.7516 383.657C51.1516 379.857 50.8416 372.497 51.8416 367.267C52.8416 362.037 55.7816 356.207 54.6816 350.217L39.2316 319.687L32.7716 352.077L47.7516 383.667V383.657ZM791.322 379.267C796.182 370.577 800.142 360.087 804.692 351.107L798.722 319.657C797.682 319.797 796.862 320.917 796.322 321.747C790.902 330.167 787.252 342.477 781.742 351.247L787.742 383.657C788.602 382.967 790.862 380.087 791.322 379.267ZM58.1116 380.037C65.9616 373.837 74.3216 367.857 80.9816 360.397L86.7216 329.647L59.3116 352.727L52.7416 383.157C55.2016 384.907 56.9216 380.957 58.1016 380.027L58.1116 380.037ZM774.342 349.067C770.082 344.837 762.122 338.487 757.212 334.677C756.282 333.957 751.402 329.887 750.742 330.657C750.632 332.747 750.682 334.807 750.992 336.897C751.562 340.717 755.462 359.647 756.752 361.877C757.562 363.267 778.892 381.217 781.182 382.707C782.392 383.497 783.232 383.927 784.732 383.647L777.922 353.047C777.522 352.007 775.322 350.047 774.342 349.067ZM49.7316 429.647C48.6616 420.117 53.0616 405.537 50.2916 396.597C49.7116 394.727 34.6516 373.977 32.1716 370.717C31.5616 369.917 30.7916 368.787 29.7516 368.647L27.9416 400.877C32.5516 408.157 38.0716 415.047 43.1016 421.747C43.5816 422.387 48.0116 431.617 49.7416 429.637L49.7316 429.647ZM788.722 430.647L808.522 401.937C808.952 392.057 808.832 381.937 807.782 372.107C807.622 370.657 807.572 369.557 806.232 368.657C800.432 378.007 793.502 386.507 787.702 395.907C787.292 396.567 785.932 396.557 785.762 397.347C784.592 402.587 787.412 421.007 787.742 428.167C787.792 429.297 787.092 430.907 788.732 430.637L788.722 430.647ZM762.122 375.277C760.742 373.787 759.942 371.387 757.742 370.657L760.172 403.717C760.672 405.317 777.012 424.067 779.402 426.537C779.882 427.037 782.952 430.687 783.732 429.657C781.602 420.147 784.512 406.067 781.502 397.397C780.342 394.057 765.592 379.037 762.122 375.287V375.277ZM58.1316 425.037C64.4616 417.657 72.1316 411.077 77.4916 402.907L78.7216 371.647C77.6616 370.217 70.9216 379.897 70.2416 380.657C65.2316 386.327 60.0316 391.987 54.7216 397.357L53.7416 430.637C55.6116 429.567 56.6016 426.787 58.1216 425.027L58.1316 425.037ZM762.102 417.317C761.082 415.887 761.282 413.687 759.752 413.657L757.952 446.937L778.732 475.647L780.722 442.347C774.462 434.417 767.952 425.517 762.102 417.317ZM77.7316 414.657C75.4316 414.077 76.0916 415.087 75.4516 415.917C72.7416 419.417 57.9016 439.277 57.1816 441.597C54.3216 450.827 59.2616 465.767 57.7516 475.657L78.5316 447.947L77.7416 414.667L77.7316 414.657ZM53.7316 457.157C53.7316 455.467 52.8816 447.317 52.5016 445.387C51.4116 439.877 38.0616 427.597 33.7516 422.857C32.2816 421.237 30.3016 418.807 29.7216 416.667C28.0816 416.397 28.7916 418.017 28.7316 419.147C28.5016 423.747 29.1016 448.257 30.6916 450.957L53.7316 475.667V457.157ZM808.732 417.657C806.892 417.797 804.692 420.427 803.382 421.767C796.992 428.327 791.792 436.237 785.252 442.677L782.732 475.147L784.712 475.637C790.202 465.537 805.572 456.137 807.472 444.887C807.782 443.037 808.732 436.527 808.732 435.147V417.647V417.657ZM767.722 519.657L773.652 489.137L756.742 455.657C755.612 462.017 754.702 468.557 753.482 474.897C752.552 479.727 749.912 483.627 750.782 489.097C751.032 490.677 763.242 515.557 764.752 517.887C765.372 518.837 766.692 519.227 767.732 519.657H767.722ZM71.7216 519.657C73.1316 510.437 85.3116 496.307 86.1716 487.807C86.5416 484.227 82.5016 464.987 81.2716 460.617C80.8616 459.147 80.5216 457.657 79.2216 456.667L63.7616 488.277C63.5916 490.677 68.0116 514.107 68.9616 516.917C69.3516 518.067 70.5016 519.347 71.7116 519.657H71.7216ZM332.232 458.657H269.732V661.157L271.232 662.657H296.732V570.657H329.232C337.402 570.657 344.112 559.637 344.772 552.197C346.982 527.427 343.092 499.347 344.672 474.217C343.852 469.067 337.482 459.807 332.232 458.657ZM362.732 458.657V662.657H386.732V458.657H362.732ZM486.732 647.157V600.657H459.732V635.657H436.732V486.157L438.232 484.657H457.232C457.562 484.657 458.752 485.977 459.732 485.657V518.657H486.732V473.157C486.732 472.757 483.722 466.527 483.372 465.987C482.072 464.007 476.162 459.647 473.802 459.077C466.902 457.417 435.342 457.847 427.192 458.617C418.602 459.427 414.912 465.057 412.222 472.647L411.692 643.197C412.342 650.907 416.762 661.177 425.282 662.607C431.332 663.617 466.352 663.697 472.182 662.607C474.752 662.127 480.582 657.817 482.252 655.677C483.292 654.337 486.492 648.397 486.732 647.157ZM504.732 458.657V662.657H531.732V574.657L554.732 662.657H580.732L580.282 656.607L550.982 553.337L577.742 458.657H550.742L531.742 532.657V458.657H504.732ZM781.362 513.267C787.372 508.257 793.462 502.987 798.982 497.397L805.732 465.657C805.582 465.467 803.532 466.677 803.092 467.037C798.302 470.937 780.302 485.377 777.862 489.277C773.792 495.777 773.522 513.617 770.752 521.657C774.172 518.737 777.922 516.147 781.362 513.267ZM50.3116 481.077C44.6616 476.117 38.5916 471.387 32.7416 466.657C32.7616 470.917 33.2216 475.727 33.9816 479.907C34.6116 483.357 36.6416 493.647 37.6516 496.237C40.4616 503.467 60.4516 514.657 65.7216 521.657L60.2716 490.617C59.4416 488.237 52.8116 483.277 50.3116 481.077ZM88.7216 562.657L98.8416 528.137L88.2316 497.647L76.1116 532.157C80.2316 540.677 82.2116 551.267 86.2316 559.657C86.7916 560.827 87.2316 562.407 88.7216 562.657ZM750.732 561.657L760.802 532.147L749.242 498.667L737.842 529.167L747.752 561.657H750.742H750.732ZM83.7316 563.647L72.7616 534.127L41.7416 514.657L53.1716 545.717C61.1316 551.247 69.5816 555.887 77.9816 560.697C79.1816 561.387 80.7216 564.417 83.7316 563.647ZM795.732 514.657L764.982 532.887L753.742 563.647L784.432 545.357L795.732 514.657ZM726.742 602.657C733.812 594.537 737.312 582.827 742.332 573.167L734.712 538.657L719.712 568.247L726.732 602.657H726.742ZM109.722 603.647C109.812 591.707 119.422 574.547 115.472 563.417C112.812 555.927 106.452 547.187 103.242 539.657C102.012 540.207 100.462 546.687 100.032 548.447C98.6916 553.927 94.8416 569.077 95.2916 573.817C95.6516 577.567 104.692 594.967 107.022 599.867C107.552 600.987 108.382 603.597 109.722 603.647ZM105.732 604.647L90.6816 575.207L58.7316 559.667L72.6716 589.217C76.7116 591.207 104.242 605.757 105.732 604.647ZM778.732 559.667L746.172 575.597L731.732 604.647L764.212 589.637L778.732 559.667ZM135.122 597.287C131.852 591.957 127.492 583.887 123.572 579.327C122.682 578.297 122.612 577.227 120.742 577.667L118.712 611.187C119.132 615.067 131.172 632.467 134.302 636.597C135.162 637.737 136.352 639.177 137.722 639.667C135.612 629.157 141.152 614.837 139.772 605.117C139.192 601.057 136.552 599.647 135.112 597.297L135.122 597.287ZM701.722 638.647L718.712 612.137L715.722 577.657C708.642 585.267 703.542 594.577 697.942 603.367C698.442 612.837 697.862 623.887 698.742 633.147C698.832 634.107 699.512 640.557 701.712 638.647H701.722ZM115.492 614.897L81.7416 604.657C81.3516 606.277 82.0616 606.977 82.7116 608.177C84.0716 610.727 98.1916 630.987 99.4516 631.687L133.732 642.157L115.492 614.897ZM755.732 604.667L721.192 615.617L703.732 642.647L738.132 631.557L755.732 604.667ZM167.732 672.657V638.157L147.722 612.657C146.372 612.837 145.982 614.017 145.782 615.197C145.362 617.697 146.612 646.907 147.182 648.707C147.752 650.507 163.102 668.737 165.452 671.367C166.042 672.027 165.372 673.277 167.742 672.647L167.732 672.657ZM687.342 652.277C688.452 650.817 690.382 648.867 690.712 647.137L691.722 612.657C690.972 611.637 682.762 621.317 681.792 622.457C679.202 625.487 672.362 633.297 670.872 636.297C668.982 640.117 669.282 663.287 669.152 669.677C669.122 671.067 668.572 671.587 670.232 672.657C675.532 665.687 682.022 659.237 687.332 652.277H687.342ZM164.732 676.647L142.712 650.177L108.742 642.657C108.442 644.307 109.512 645.347 110.312 646.577C112.152 649.367 128.012 668.257 129.782 669.107L164.732 676.647ZM727.732 643.657L694.122 650.577C692.562 651.217 676.142 670.707 674.702 673.117C673.972 674.337 673.412 675.107 673.752 676.657L708.052 668.717C713.462 661.487 720.252 654.997 725.722 647.857C726.292 647.117 728.442 644.307 727.732 643.657ZM179.112 649.267C177.822 648.167 176.102 644.787 173.722 645.167L179.252 679.637L203.732 701.647L198.162 666.727C192.282 660.347 185.672 654.827 179.112 649.267ZM647.122 689.047C648.812 687.467 657.162 681.037 657.552 679.967L663.732 644.657L639.222 666.637L632.752 701.657C633.542 702.647 645.902 690.197 647.122 689.047ZM209.352 675.057C208.152 674.257 205.392 672.087 205.762 675.117C206.942 684.727 213.912 697.127 215.842 707.047L242.722 725.657L232.772 691.377C224.892 686.117 217.222 680.297 209.352 675.057ZM631.732 673.657C631.162 673.077 624.242 677.327 623.132 678.057C619.782 680.237 606.612 689.027 604.882 691.297C602.622 694.257 596.912 713.527 595.252 718.667C594.902 719.737 593.522 725.387 593.752 725.657L620.772 707.187L631.742 673.667L631.732 673.657ZM181.232 704.657C186.572 705.077 192.762 704.657 198.232 704.657C198.442 704.657 199.442 706.147 200.732 705.647C201.952 704.587 179.182 685.507 177.482 683.407C165.352 682.007 152.932 679.857 140.742 681.147C149.442 686.757 159.422 701.907 169.502 703.387C172.912 703.887 177.922 704.387 181.242 704.647L181.232 704.657ZM695.732 680.667C694.312 679.627 663.882 682.057 660.672 683.097C658.472 683.817 644.532 696.567 641.712 699.137C639.962 700.737 637.982 702.627 636.722 704.637C642.842 704.387 649.092 705.027 655.212 704.637C658.862 704.407 669.002 703.447 671.992 702.417C677.922 700.357 687.692 686.427 694.382 683.317L695.722 680.657L695.732 680.667ZM283.722 744.657C283.842 742.537 283.002 740.567 282.222 738.667C280.102 733.497 273.382 716.507 270.752 713.137C269.172 711.107 250.982 700.757 247.602 699.287C245.702 698.457 243.912 697.427 241.722 697.677L255.032 729.357L283.702 744.667L283.722 744.657ZM594.732 697.657C593.172 697.267 592.382 698.067 591.192 698.607C587.512 700.257 568.872 709.937 567.062 711.967C564.622 714.697 555.492 736.347 553.712 741.127C553.162 742.597 552.532 744.027 552.742 745.647L581.752 729.167L594.732 697.657ZM240.732 729.647C240.392 728.507 239.162 727.357 238.232 726.657C230.952 721.207 221.552 716.057 213.802 711.077L178.742 712.657C177.372 713.857 183.482 717.757 184.422 718.467C191.072 723.507 198.632 727.567 205.612 732.137L240.742 729.647H240.732ZM658.732 712.657L623.492 710.867C614.592 716.487 604.432 722.177 596.742 729.647L632.042 732.497C638.922 726.847 646.982 722.707 654.212 717.627C655.032 717.057 660.052 713.817 658.742 712.667L658.732 712.657ZM328.732 757.647L309.692 727.197L278.732 715.667L297.422 746.717L328.732 757.647ZM539.422 746.337L557.722 715.657L528.212 726.627L508.752 756.167C508.412 758.527 509.382 757.507 510.842 757.267C513.772 756.787 537.702 747.807 539.422 746.337ZM618.732 739.667L582.862 733.307C573.932 739.287 562.812 742.757 554.742 749.637L590.082 755.337L618.732 739.657V739.667ZM282.732 748.667L254.192 733.687C242.202 734.637 230.442 737.147 218.752 739.667L247.192 755.537L282.732 748.667ZM511.732 734.667L475.152 742.577C435.562 748.257 395.892 748.477 356.502 741.387C346.172 739.527 336.172 735.987 325.732 734.667C328.142 741.087 338.982 752.707 338.672 759.007C337.922 774.527 322.642 770.397 313.732 777.647C358.752 789.177 405.642 794.657 452.212 790.637C466.842 789.377 484.482 786.457 498.932 783.357C506.892 781.647 514.652 778.807 522.722 777.637C518.572 772.607 507.582 772.927 502.732 769.137C501.182 767.927 498.072 760.737 497.902 758.897C497.522 754.587 508.992 739.277 511.722 734.657L511.732 734.667ZM326.732 760.667L296.232 750.557L263.722 760.667V763.657L293.132 773.677C302.792 769.377 314.402 767.597 323.962 763.407C325.112 762.897 326.432 761.967 326.722 760.677L326.732 760.667ZM573.742 760.657L540.322 750.657L510.732 761.167C510.532 762.967 512.022 763.127 513.262 763.637C522.782 767.547 534.452 769.657 544.162 773.647L573.742 763.647V760.657Z"
                        fill="white"
                      />
                      <path
                        d="M420.732 48.6467C422.402 40.5467 435.892 36.0767 437.562 46.4167C438.622 52.9667 422.752 75.7767 415.612 74.1767C409.402 72.7767 408.742 60.6267 407.042 55.8467C405.692 52.0467 404.522 48.9967 400.192 51.5367L398.732 49.1767C404.542 43.8867 411.492 34.2267 415.242 46.6367C416.072 49.3867 417.272 62.3067 420.212 61.6467C423.812 58.7867 427.572 53.7067 424.782 49.0867L420.732 48.6367V48.6467Z"
                        fill="white"
                      />
                      <path
                        d="M317.732 485.657H296.732V543.657H317.732V485.657Z"
                        fill="white"
                      />
                      <path
                        d="M440.732 379.657H417.732L428.742 271.657C430.572 272.037 430.592 273.617 430.772 275.117C433.412 297.307 435.502 319.977 437.722 342.167C438.962 354.617 439.672 367.187 440.742 379.647L440.732 379.657Z"
                        fill="white"
                      />
                      <path
                        d="M535.512 171.867C539.542 182.227 533.532 203.737 519.372 198.737C514.042 188.217 521.712 167.787 535.512 171.867Z"
                        fill="white"
                      />
                      <path
                        d="M481.142 183.057C478.002 186.447 474.802 189.757 469.742 189.647C469.552 183.797 477.482 170.557 484.092 172.767C489.162 174.457 482.892 181.177 481.152 183.057H481.142Z"
                        fill="white"
                      />
                    </svg>
                  </div>
                )}
              </div>
            )}
          </div>
          <div className="w-full grid grid-cols-1 md:grid-cols-2 px-4 gap-12 md:gap-0">
            {/* Credits */}
            {work.credits && work.credits.length > 0 && (
              <div className="grid-span-1">
                <h3 className="mb-2 opacity-50 uppercase text-xs">Credits</h3>
                <div className="space-y-2 font-normal">
                  {work.credits.map((credit, index) => (
                    <ul key={index} className="grid grid-cols-2 font-normal">
                      <li className="font-normal">{credit.role}</li>
                      {credit.names && credit.names.length > 0 && (
                        <ul className="font-normal">
                          {credit.names.map((name, nameIndex) => (
                            <li className="font-normal" key={nameIndex}>
                              {name}
                            </li>
                          ))}
                        </ul>
                      )}
                    </ul>
                  ))}
                </div>
              </div>
            )}
            <div className="grid-span-1">
              {work.awards && work.awards.length > 0 ? (
                <div className="space-y-2 mb-6">
                  <h3 className="mb-2 opacity-50 uppercase text-xs">Awards</h3>
                  {work.awards.map((award, index) => (
                    <div key={index} className="font-normal">
                      {award.name} ({award.year})
                    </div>
                  ))}
                </div>
              ) : null}
              {work.info && work.info.length > 0 && (
                <>
                  <h3 className="mb-2 opacity-50 uppercase text-xs">Info</h3>

                  <PortableText
                    value={work.info}
                    components={{
                      block: {
                        normal: ({ children }) => (
                          <p className="font-normal">{children}</p>
                        ),
                      },
                      marks: {
                        link: ({ children, value }) => (
                          <a
                            href={value.href}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="underline"
                          >
                            {children}
                          </a>
                        ),
                        internalLink: ({ children, value }) => {
                          if (!value.reference?.slug?.current) {
                            return (
                              <span className="text-gray-500">{children}</span>
                            );
                          }
                          return (
                            <Link
                              href={`/work/${value.reference.slug.current}`}
                              className="underline"
                            >
                              {children}
                            </Link>
                          );
                        },
                      },
                    }}
                  />
                </>
              )}
            </div>
          </div>
        </div>
        <DraggableStackWrapper
          initialStackImages={work.stack}
          initialImagePalettes={[
            work.colorOverwrite,
            work.imagePalette0,
            work.imagePalette1,
            work.imagePalette2,
          ]}
          slug={slug}
          stackCount={work.stackCount}
        />
      </main>
    </WorkPasswordWrapper>
  );
}
